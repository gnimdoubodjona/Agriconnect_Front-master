<div class="search-container">
  <form [formGroup]="searchForm" class="search-form">
    <div class="search-filters">
      <!-- Spécialisation -->
      <div class="form-group">
        <label for="specialisation">Spécialisation</label>
        <input
          id="specialisation"
          type="text"
          formControlName="specialisation"
          placeholder="Ex: bovins, équins..."
          class="form-control">
      </div>

      <!-- Disponibilité -->
      <div class="form-group">
        <label for="disponibilite">Disponibilité</label>
        <select id="disponibilite" formControlName="disponibilite" class="form-control">
          <option [ngValue]="null">Tous</option>
          <option [ngValue]="true">Disponible</option>
          <option [ngValue]="false">Non disponible</option>
        </select>
      </div>

      <!-- Localisation -->
      <div class="form-group location-group">
        <div class="location-header">
          <label>
            <input type="checkbox" formControlName="useLocation"> Utiliser la localisation
          </label>
          <button type="button" (click)="useCurrentLocation()" class="btn btn-secondary">
            Ma position
          </button>
        </div>

        <div *ngIf="searchForm.get('useLocation')?.value" class="location-inputs">
          <div class="coordinates">
            <input
              type="number"
              formControlName="latitude"
              placeholder="Latitude"
              class="form-control">
            <input
              type="number"
              formControlName="longitude"
              placeholder="Longitude"
              class="form-control">
          </div>
          <input
            type="number"
            formControlName="radius"
            placeholder="Rayon (km)"
            class="form-control">
        </div>
      </div>
    </div>
  </form>

  <!-- Messages d'état -->
  <div *ngIf="loading" class="alert alert-info">
    Recherche en cours...
  </div>
  <div *ngIf="error" class="alert alert-danger">
    {{ error }}
  </div>

  <!-- Résultats -->
  <div class="results-container" *ngIf="veterinaires.length > 0">
    <div class="veterinaire-card" *ngFor="let vet of veterinaires">
      <h3>{{ vet.utilisateur.username }}</h3>
      <p><strong>Spécialisation:</strong> {{ vet.specialisation }}</p>
      <p><strong>Disponibilité:</strong> {{ vet.disponibilite ? 'Disponible' : 'Non disponible' }}</p>
      <p><strong>Adresse:</strong> {{ vet.adresse }}</p>
      <p *ngIf="vet.distance"><strong>Distance:</strong> {{ vet.distance.toFixed(2) }} km</p>
      <p><strong>Expérience:</strong> {{ vet.experience }} ans</p>
      <div class="qualifications">
        <strong>Qualifications:</strong>
        <p>{{ vet.qualifications }}</p>
      </div>
    </div>
  </div>

  <div *ngIf="!loading && veterinaires.length === 0" class="alert alert-info">
    Aucun vétérinaire trouvé pour ces critères.
  </div>
</div>
